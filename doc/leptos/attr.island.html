<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Defines a component as an interactive island when you are using the `experimental-islands` feature of Leptos. Apart from the macro name, the API is the same as the `component` macro."><title>island in leptos - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="leptos" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0-nightly (bf9a1c8a1 2023-10-08)" data-channel="nightly" data-search-js="search-5f5ec5419eadd0c9.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc attr"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../leptos/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../leptos/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In leptos</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Attribute Macro <a href="index.html">leptos</a>::<wbr><a class="attr" href="#">island</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/leptos_macro/lib.rs.html#688">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>#[island]</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Defines a component as an interactive island when you are using the
<code>experimental-islands</code> feature of Leptos. Apart from the macro name,
the API is the same as the <a href="attr.component.html" title="attr leptos::component"><code>component</code></a> macro.</p>
<p>When you activate the <code>experimental-islands</code> feature, every <code>#[component]</code>
is server-only by default. This “default to server” behavior is important:
you opt into shipping code to the client, rather than opting out. You can
opt into client-side interactivity for any given component by changing from
<code>#[component]</code> to <code>#[island]</code>—the two macros are otherwise identical.</p>
<p>Everything that is included inside an island will be compiled to WASM and
shipped to the browser. So the key to really benefiting from this architecture
is to make islands as small as possible, and include only the minimal
required amount of functionality in islands themselves.</p>
<p>Only code included in an island itself is compiled to WASM. This means:</p>
<ol>
<li><code>children</code> can be provided from a server <code>#[component]</code> to an <code>#[island]</code>
without the island needing to be able to hydrate them.</li>
<li>Props can be passed from the server to an island.</li>
</ol>
<h3 id="present-limitations"><a href="#present-limitations">Present Limitations</a></h3>
<p>A few noteworthy limitations, at the moment:</p>
<ol>
<li><code>children</code> are completely opaque in islands. You can’t iterate over <code>children</code>;
in fact they’re all bundled into a single <code>&lt;leptos-children&gt;</code> HTML element.</li>
<li>Similarly, <code>children</code> need to be used in the HTML rendered on the server.
If they need to be displayed conditionally, they should be included in the HTML
and rendered or not using <code>display: none</code> rather than <code>&lt;Show&gt;</code> or ordinary control flow.
This is because the children aren’t serialized at all, other than as HTML: if that
HTML isn’t present in the DOM, even if hidden, it is never sent and not available
to the client at all.</li>
</ol>
<h3 id="example"><a href="#example">Example</a></h3>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">use </span>leptos::<span class="kw-2">*</span>;

<span class="attr">#[component]
</span><span class="kw">pub fn </span>App() -&gt; <span class="kw">impl </span>IntoView {
    <span class="comment">// this would panic if it ran in the browser
    // but because this isn&#39;t an island, it only runs on the server
    </span><span class="kw">let </span>file =
        std::fs::read_to_string(<span class="string">&quot;./src/is_this_a_server_component.txt&quot;</span>)
            .unwrap();
    <span class="kw">let </span>len = file.len();

    <span class="macro">view! </span>{
        &lt;p&gt;<span class="string">&quot;The starting value for the button is the file&#39;s length.&quot;</span>&lt;/p&gt;
        <span class="comment">// `value` is serialized and given to the island as a prop
        </span>&lt;Island value=len&gt;
            <span class="comment">// `file` is only available on the server
            // island props are projected in, so we can nest
            // server-only content inside islands inside server content etc.
            </span>&lt;p&gt;{file}&lt;/p&gt;
        &lt;/Island&gt;
    }
}

<span class="attr">#[island]
</span><span class="kw">pub fn </span>Island(
    <span class="attr">#[prop(into)] </span>value: RwSignal&lt;usize&gt;,
    children: Children,
) -&gt; <span class="kw">impl </span>IntoView {
    <span class="comment">// because `RwSignal&lt;T&gt;` implements `From&lt;T&gt;`, we can pass in a plain
    // value and use it as the starting value of a signal here
    </span><span class="macro">view! </span>{
        &lt;button on:click=<span class="kw">move </span>|<span class="kw">_</span>| value.update(|n| <span class="kw-2">*</span>n += <span class="number">1</span>)&gt;
            {value}
        &lt;/button&gt;
        {children()}
    }
}</code></pre></div>
</div></details></section></div></main></body></html>